<!DOCTYPE html><html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Moderator Application - Neverland</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600&display=swap" rel="stylesheet">
  <style>
    body {
      margin: 0;
      font-family: 'Inter', sans-serif;
      background: #0f0f23;
      color: #e4e4e7;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 2rem;
    }h1 {
  font-size: 2.5rem;
  margin-bottom: 1rem;
}

.form-card {
  background: rgba(255,255,255,0.05);
  border: 1px solid rgba(255,255,255,0.1);
  padding: 2rem;
  border-radius: 12px;
  max-width: 600px;
  width: 100%;
  box-shadow: 0 8px 32px rgba(0,0,0,0.3);
}

.discord-login {
  background: linear-gradient(135deg, #5865f2, #4752c4);
  color: white;
  padding: 1rem;
  width: 100%;
  border: none;
  border-radius: 8px;
  cursor: pointer;
  font-weight: 600;
  margin-bottom: 1rem;
}

.user-info {
  display: flex;
  align-items: center;
  gap: 1rem;
  margin-bottom: 1rem;
}

.user-avatar {
  width: 50px;
  height: 50px;
  border-radius: 50%;
}

.logout-btn {
  margin-left: auto;
  padding: 0.5rem 1rem;
  background: transparent;
  border: 1px solid rgba(255,255,255,0.2);
  color: #a1a1aa;
  cursor: pointer;
  border-radius: 6px;
}

form input, form textarea {
  width: 100%;
  padding: 0.75rem;
  margin-bottom: 1rem;
  border: none;
  border-radius: 6px;
  background: rgba(255,255,255,0.05);
  color: #e4e4e7;
}

.submit-btn {
  background: linear-gradient(135deg, #5865f2, #4752c4);
  color: white;
  border: none;
  padding: 1rem;
  border-radius: 8px;
  cursor: pointer;
  width: 100%;
  font-weight: 600;
}

.success {
  background: #10b981;
  padding: 1rem;
  border-radius: 8px;
  color: white;
  margin-bottom: 1rem;
  display: none;
}

  </style>
</head>
<body>
  <h1>Apply as Moderator</h1>
  <div class="form-card">
    <div class="success" id="successMessage">Application submitted successfully!</div><div id="loginSection">
  <button class="discord-login" onclick="loginWithDiscord()">Login with Discord</button>
</div>

<div class="user-info" id="userInfo" style="display: none;">
  <img src="" alt="Avatar" class="user-avatar" id="userAvatar">
  <div>
    <div id="userName"></div>
    <div id="userTag" style="font-size: 0.85rem; color: #a1a1aa;"></div>
  </div>
  <button class="logout-btn" onclick="logout()">Logout</button>
</div>

<form id="applicationForm" class="form-disabled">
  <input type="text" id="discordUsername" placeholder="Discord#1234" readonly required>
  <input type="number" id="age" placeholder="Age" required>
  <input type="text" id="availability" placeholder="Availability (e.g., Evenings, 10h/week)" required>
  <textarea id="experience" placeholder="Previous moderation experience"></textarea>
  <textarea id="motivation" placeholder="Why do you want to be a moderator?" required></textarea>
  <button class="submit-btn" type="submit">Submit</button>
</form>

  </div>  <script>
    const DISCORD_CONFIG = {
      CLIENT_ID: '1375104763917504633',
      CLIENT_SECRET: 'DEIN_DISCORD_CLIENT_SECRET',
      REDIRECT_URI: window.location.origin + window.location.pathname,
      WEBHOOK_URL: 'https://discord.com/api/webhooks/1376200566971170999/it_7aTbzFDya5O0sRNFzMGlyi36nV9KiN9Bj93qxlTluIIVC2YAcUos0j6ACx7822KYp'
    };

    let currentUser = null;

    function loginWithDiscord() {
      const params = new URLSearchParams({
        client_id: DISCORD_CONFIG.CLIENT_ID,
        redirect_uri: DISCORD_CONFIG.REDIRECT_URI,
        response_type: 'code',
        scope: 'identify'
      });
      window.location.href = `https://discord.com/api/oauth2/authorize?${params}`;
    }

    async function handleDiscordCallback() {
      const code = new URLSearchParams(window.location.search).get('code');
      if (!code) return;

      const tokenRes = await fetch('https://discord.com/api/oauth2/token', {
        method: 'POST',
        headers: { 'Content-Type': 'application/x-www-form-urlencoded' },
        body: new URLSearchParams({
          client_id: DISCORD_CONFIG.CLIENT_ID,
          client_secret: DISCORD_CONFIG.CLIENT_SECRET,
          code: code,
          grant_type: 'authorization_code',
          redirect_uri: DISCORD_CONFIG.REDIRECT_URI
        })
      });

      const tokenData = await tokenRes.json();
      if (!tokenData.access_token) return;

      const userRes = await fetch('https://discord.com/api/users/@me', {
        headers: { Authorization: `Bearer ${tokenData.access_token}` }
      });
      const user = await userRes.json();

      currentUser = {
        id: user.id,
        username: user.username,
        discriminator: user.discriminator,
        avatar: user.avatar,
        tag: `${user.username}#${user.discriminator}`
      };

      localStorage.setItem('modUser', JSON.stringify(currentUser));
      updateUIForLoggedInUser();
      window.history.replaceState({}, document.title, window.location.pathname);
    }

    function updateUIForLoggedInUser() {
      document.getElementById('loginSection').style.display = 'none';
      document.getElementById('userInfo').style.display = 'flex';
      document.getElementById('applicationForm').classList.remove('form-disabled');

      document.getElementById('userName').textContent = currentUser.username;
      document.getElementById('userTag').textContent = currentUser.tag;
      document.getElementById('userAvatar').src = currentUser.avatar
        ? `https://cdn.discordapp.com/avatars/${currentUser.id}/${currentUser.avatar}.png`
        : `https://cdn.discordapp.com/embed/avatars/${currentUser.discriminator % 5}.png`;
      document.getElementById('discordUsername').value = currentUser.tag;
    }

    function logout() {
      localStorage.removeItem('modUser');
      currentUser = null;
      document.getElementById('loginSection').style.display = 'block';
      document.getElementById('userInfo').style.display = 'none';
      document.getElementById('applicationForm').classList.add('form-disabled');
      document.getElementById('applicationForm').reset();
    }

    document.getElementById('applicationForm').addEventListener('submit', async (e) => {
      e.preventDefault();
      if (!currentUser) return alert("Please log in first.");

      const data = {
        age: document.getElementById('age').value,
        availability: document.getElementById('availability').value,
        experience: document.getElementById('experience').value || 'None',
        motivation: document.getElementById('motivation').value
      };

      const embed = {
        title: "New Mod Application",
        color: 5865242,
        thumbnail: {
          url: currentUser.avatar
            ? `https://cdn.discordapp.com/avatars/${currentUser.id}/${currentUser.avatar}.png`
            : `https://cdn.discordapp.com/embed/avatars/${currentUser.discriminator % 5}.png`
        },
        fields: [
          { name: "User", value: `<@${currentUser.id}> (${currentUser.tag})`, inline: true },
          { name: "Age", value: data.age, inline: true },
          { name: "Availability", value: data.availability },
          { name: "Experience", value: data.experience },
          { name: "Motivation", value: data.motivation }
        ],
        timestamp: new Date().toISOString(),
        footer: { text: "Neverland Mod Form" }
      };

      await fetch(DISCORD_CONFIG.WEBHOOK_URL, {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ content: 'New moderator application received:', embeds: [embed] })
      });

      document.getElementById('successMessage').style.display = 'block';
      document.getElementById('applicationForm').reset();
    });

    window.addEventListener('load', () => {
      const saved = localStorage.getItem('modUser');
      if (saved) {
        currentUser = JSON.parse(saved);
        updateUIForLoggedInUser();
      }
      handleDiscordCallback();
    });
  </script></body>
</html>
